<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      width: 280px;
      background: #0A1022;
      color: white;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      padding: 24px;
      text-align: center;
    }
    .logo {
      width: 48px; height: 48px;
      margin: 0 auto 16px;
    }
    .title { font-size: 16px; font-weight: 700; margin-bottom: 4px; }
    .status {
      display: flex; align-items: center; justify-content: center; gap: 8px;
      font-size: 13px; color: rgba(255,255,255,0.6);
      margin-top: 16px;
    }
    .dot {
      width: 8px; height: 8px; border-radius: 50%;
    }
    .footer {
      font-size: 10px; color: rgba(255,255,255,0.2);
      margin-top: 20px; padding-top: 12px;
      border-top: 1px solid rgba(255,255,255,0.06);
    }
    .code-row {
      display: flex; gap: 6px; justify-content: center; margin-bottom: 10px;
    }
    .code-digit {
      width: 36px; height: 42px;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 8px;
      color: white;
      font-size: 20px;
      font-weight: 700;
      text-align: center;
      outline: none;
    }
    .code-digit:focus {
      border-color: #7C5CFF;
      box-shadow: 0 0 0 2px rgba(124, 92, 255, 0.3);
    }
    .connect-btn {
      width: 100%; padding: 10px; border-radius: 8px; border: none;
      background: #7C5CFF; color: white; font-weight: 600; cursor: pointer;
      font-size: 13px; transition: opacity 0.2s;
    }
    .connect-btn:disabled {
      opacity: 0.4; cursor: not-allowed;
    }
    .error-text {
      font-size: 11px; color: #F87171; margin-top: 8px;
    }
    .hint {
      font-size: 11px; color: rgba(255,255,255,0.35); margin-top: 6px;
    }
  </style>
</head>
<body>
  <div id="main-view">
    <div class="logo">
      <svg width="48" height="48" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="bg" x1="0" y1="0" x2="512" y2="512" gradientUnits="userSpaceOnUse">
            <stop stop-color="#2B1766"/>
            <stop offset="1" stop-color="#0E2847"/>
          </linearGradient>
          <linearGradient id="spiral" x1="146" y1="86" x2="366" y2="306" gradientUnits="userSpaceOnUse">
            <stop stop-color="#FFFFFF"/>
            <stop offset="0.65" stop-color="#E8D5A0"/>
            <stop offset="1" stop-color="#C9A84C"/>
          </linearGradient>
          <linearGradient id="textGrad" x1="120" y1="420" x2="392" y2="420" gradientUnits="userSpaceOnUse">
            <stop stop-color="#E8D5A0"/>
            <stop offset="0.5" stop-color="#C9A84C"/>
            <stop offset="1" stop-color="#E8D5A0"/>
          </linearGradient>
        </defs>
        <rect width="512" height="512" rx="112" fill="url(#bg)"/>
        <rect x="6" y="6" width="500" height="500" rx="108" stroke="#C9A84C" stroke-width="2" fill="none" opacity="0.35"/>
        <path d="M146 86 H366 V306 H158 V98 H354 V294 H170 V110 H342 V282 H182 V122 H330 V270 H194 V134 H318 V258 H206 V146 H306 V246 H218 V158 H294 V234 H230 V170 H282 V222 H242 V182 H270 V210 H254 V194 H258 V198" stroke="url(#spiral)" stroke-width="4" stroke-linecap="square" stroke-linejoin="miter" fill="none"/>
        <text x="256" y="425" text-anchor="middle" font-family="'Palatino Linotype','Book Antiqua',Palatino,Georgia,'Times New Roman',serif" font-weight="600" font-size="56" letter-spacing="18" fill="url(#textGrad)">PHYLAX</text>
      </svg>
    </div>
    <div class="title">Phylax Safety</div>

    <div id="status-container" class="status">
      <div id="status-icon" class="dot" style="background: #FBBF24; box-shadow: 0 0 8px rgba(251,191,36,0.4);"></div>
      <span id="status-text">Not Connected</span>
    </div>

    <div id="pairing-section" style="margin-top: 20px;">
      <div class="code-row">
        <input type="text" maxlength="1" class="code-digit" data-index="0">
        <input type="text" maxlength="1" class="code-digit" data-index="1">
        <input type="text" maxlength="1" class="code-digit" data-index="2">
        <input type="text" maxlength="1" class="code-digit" data-index="3">
        <input type="text" maxlength="1" class="code-digit" data-index="4">
        <input type="text" maxlength="1" class="code-digit" data-index="5">
      </div>
      <button id="connect-btn" class="connect-btn" disabled>
        Connect Device
      </button>
      <div class="hint">Enter 6-character code from parent dashboard</div>
      <div id="error-msg" class="error-text" style="display:none;"></div>
    </div>

    <div id="connected-section" style="display: none; margin-top: 20px;">
       <div style="font-size: 12px; opacity: 0.6; margin-bottom: 4px;">Linked to Parent Account</div>
       <div style="font-size: 14px; font-weight: 600; color: #22D3EE;">Active & Monitoring</div>
    </div>
  </div>

  <div class="footer">Managed by your parent or guardian</div>

  <script src="popup.js"></script>
</body>
</html>
